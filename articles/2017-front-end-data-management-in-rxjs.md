---
title: hello rxjs !
description: 常见的前端数据应用场景在 rxjs 中的实现
date: 2017-09-21
---

## 缘起

很多时候, 技术选型, 或者框架横向对比时, 难免偏于主观臆测.
觉得需要一种量化的衡量某一框架(解决方案)的方法.
于是, 产生了如下的需求:

* 必定是可以通过代码来客观感知的
  - 如果对比了多个解决方案, 都没怎么写代码, 这不是 `耍流氓` 么
* 代码的量必须精简
  - 你总不能尝试个解决方案就写个真正的项目, 然后再说: 不合适, 这不是 `挖坑` 么

所以, 个人便挑选了一些前端开发中常见的数据管理的应用场景, 作为自己的一个 `check list`.
正好在这个时间点, 先行在 `rxjs` 身上试验下 :)

## 场景

### 异步请求队列

* 场景

```
列表筛选是一个很常见的应用场景, 通过选择查询条件, 得到查询结果列表, 如果:

1. 查询请求比较耗时
2. 用户操作频率很高

发出的请求顺序可能是: A -> B -> C -> D
请求返回的顺序可能是: A -> C -> D -> B

如果我们常规的把最后的返回作为查询结果, 那么: BUG !
(当然, 此处有个偷懒的方式是, debounce 查询请求, 但治标不治本)
```

### 多级数据源

* 场景

```
为了加速渲染或其他原因, 获取某一数据实体的顺序如下

1. 从 local storage 获取数据, 立即 render
2. http 请求数据, 再 render
3. websocket 或 sse 监听变更, render

```

### 合并数据源

* 场景

```
一个类似聊天室的应用, 有一个在线好友列表

1. 初始时 http 请求, 获取列表
2. 然后 websocket 或 sse 监听好友上线/下线
```

### 双列表无限加载

* 场景描述: 页面上有两个列表, 左边为 `产品列表`, 右侧为某一产品的 `订单列表`, 两个列表都可以无限加载

* 核心代码段


## 结语

愿大家代码越写越开心 :)
